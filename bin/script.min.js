!function(a,b){function c(a,b,d,e){if(!a.length)return"#document-fragment"===a.nodeName?void c(a.childNodes,b,d,e):("function"==typeof j.Events.list[b]?j.Events.list[b](a,function(){return function(a){d(a,e)}}(d,e)):"undefined"!=typeof a.addEventListener?a.addEventListener(b,function(){return function(a){d(a,e)}}(d,e),!1):a.attachEvent("on"+b,function(){return function(a){d(a,e)}}(d,e)),a);for(var f=0;f<a.length;f++)c(a[f],b,d,e)}function d(a){"function"==typeof a&&j.dom_load_event_listeners.push(a)}function e(a){for(var b=[],c=0;c<a.childNodes.length;c++)if(b.push(a.childNodes[c]),a.childNodes[c].childNodes)for(var d=e(a.childNodes[c]),f=0;f<d.length;f++)b.push(d[f]);return b}function f(a,b){if(this!==h)var d=f.create(a,b);else var d=f.select(a,b);return d.childs=d.childNodes,d.parent=d.parentNode,d.clone=d.cloneNode,d.add=function(a){return function(b){if("#document-fragment"===b.nodeName){for(var c=[],d=b.childNodes,e=d.length,f=0;e>f;f++)a.appendChild(d[0]),c.push(a.childNodes[a.childNodes.length-1]);return c}if(!b.length)return a.appendChild(b),l(b);for(var f=0;f<b.length;f++){for(var c=[],e=b.length,f=0;e>f;f++)a.appendChild(b[0]),c.push(a.childNodes[a.childNodes.length-1]);return c}}}(d),d.on=function(a){return function(b,d,e){c(a,b,d,e)}}(d),d.offset=function(a){return function(){for(var b={x:0,y:0};a;)b.x+=a.offsetLeft-(a==i.body?0:a.scrollLeft)+a.clientLeft,b.y+=a.offsetTop-(a==i.body?0:a.scrollTop)+a.clientTop,a=a.offsetParent;return b}}(d),d.inner=function(a){var b=i.createElement("div");return b.setAttribute("tag-name","_inner_"),a.appendChild(b),a},d}function g(a){this.name=a,j.components[a]=this}var h=a,i=b,j={name:"MarmWork"};j.Events={list:{}},j.Events.add=function(a,b){j.Events.list[a]=b},j.Events.on_tap_events_list=[],j.Events.add("CLICK",function(a,b){var c=new j.Events.on_tap_object(a,b);j.Events.on_tap_events_list.push(c)}),j.Events.on_tap_object=function(a,b){this.callback=b,this.element=a,this.touchstart=function(a){return function(b){a.moved=!1,a.startX=b.touches[0].clientX,a.startY=b.touches[0].clientY}}(this),this.touchmove=function(a){return function(b){(Math.abs(b.touches[0].clientX-a.startX)>10||Math.abs(b.touches[0].clientY-a.startY)>10)&&(a.moved=!0)}}(this),this.touchend=function(a){return function(b){a.moved||a.callback(b)}}(this),c(this.element,"touchstart",this.touchstart),c(this.element,"touchmove",this.touchmove),c(this.element,"touchend",this.touchend),c(this.element,"touchcancel",this.touchend),c(this.element,"click",function(a,b){"ontouchstart"in h||b.callback(a)},this)},j.dom_load_event_listeners=[],j.dom_content_loaded=!1,j.on_dom_content_loaded=function(){if(!j.dom_content_loaded){j.dom_content_loaded=!0;for(var a=0;a<j.dom_load_event_listeners.length;a++){var b=j.dom_load_event_listeners[a];"function"==typeof b&&b()}}},c(i,"DOMContentLoaded",j.on_dom_content_loaded),c(h,"load",j.on_dom_content_loaded),h.onload=function(){j.on_dom_content_loaded()};var k=function(a){return k.get(a)};k.normalize=function(a){return a?"string"==typeof a?{url:a}:a:null},k.json=function(a){return(a=k.normalize(a))?(a.json=!0,new k.request(a)):void 0},k.get=function(a){return new k.request(a)},k.post=function(a){return(a=k.normalize(a))?(a.method="POST",new k.request(a)):void 0},k.put=function(a){return(a=k.normalize(a))?(a.method="PUT",new k.request(a)):void 0},k.delete_=function(a){return(a=k.normalize(a))?(a.method="DELETE",new k.request(a)):void 0},k.request=function(a){if(!a)return!1;if("string"==typeof a&&(a={url:a}),"POST"===a.method||"PUT"===a.method||"DELETE"===a.method){var b="?";for(var c in a.options)b+=a.options.hasOwnProperty(c)?"&"+c+"="+a.options[c]:""}else{a.method="GET",a.url+=a.url.indexOf("?")<0?"?":"";for(var c in a.options)a.url+=a.options.hasOwnProperty(c)?"&"+c+"="+a.options[c]:""}this.xhr=h.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.xhr.options=a,this.xhr.callbacks={then:[],error:[]},this.then=function(a){return this.xhr.callbacks.then.push(a),this},this.error=function(a){return this.xhr.callbacks.error.push(a),this},this.xhr.call=function(a,b){for(var c=0;c<this.callbacks[a].length;c++)"function"==typeof this.callbacks[a][c]&&this.callbacks[a][c](b)},this.xhr.onreadystatechange=function(){if(4===this.readyState&&200==this.status){var a=this.responseText;if(this.options.json)try{a=JSON.parse(a)}catch(b){return this.call("error","invalid json"),!1}this.call("then",a)}else 4===this.readyState&&404==this.status?this.call("error","404"):4===this.readyState&&this.call("error","unknow")},this.xhr.open(a.method,a.url,!0),this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xhr.send("undefined"!=typeof b?b:null)},j.Element=f;var l=f;f.create=function(a,b){var c,d=/\w+/.exec(a)[0];if(j.components[d]){var e="object"==typeof b?b:{},f=j.components[d].create(e);child.parentNode.insertBefore(f,child),child.parentNode.removeChild(child)}else c=i.createElement(d);var g=a.replace(/#([a-z-_]+)/i,"").replace(/\w+/,"").split(".");if(g.length>1){c.className="";for(var h=1;h<g.length;h++)c.className+=" "+g[h]}var k=/([a-z-_]+)(#([a-z-_]+))/i.exec(a);return k&&(c.id=k[3]),c},f.select=function(a){var b;return"string"!=typeof a?b=a:"#"==a[0]&&(b=i.getElementById(a.substring(1))||new l("div")),b},j.components={};j.Component=g,g.attributes_parser=function(a,b){for(var c={},d=0;d<a.length;d++)if(c[a[d].name]=a[d].value,"string"==typeof a[d].value&&"$"==a[d].value[0]&&b)for(parameter in b)a[d].value==="${"+parameter+"}"&&b.hasOwnProperty(parameter)&&(c[a[d].name]=b[parameter]);return c},g.prototype.create=function(a){var b=f(i.createDocumentFragment());this.render(b,a);var c=i.createElement("div");c.appendChild(b);var d=e(c);if(a._CHILDNODES_.length){for(var g=!1,h=0;h<d.length;h++){var j=d[h];if("_inner_"===j.getAttribute("tag-name")){for(var k=a._CHILDNODES_.length,h=0;k>h;h++)j.parentNode.insertBefore(a._CHILDNODES_[0],j);j.parentNode.removeChild(j),g=!0;break}}if(!g){console.error("L'intérieur du Component \""+this.name+"\" n'est pas défini.");for(var h=0;h<a._CHILDNODES_.length;h++)c.firstChild.appendChild(a._CHILDNODES_[h])}}for(var l=i.createDocumentFragment();c.childNodes.length;)l.appendChild(c.childNodes[0]);return l};var m=g.generate=g.gen=function(a,b){if("string"!=typeof a)return i.createElement("div");a=a.replace(/^\s+|\s+$/g,""),a=a.replace(/<(\w*)( (.+?))?\/>/g,"<$1$2></$1>"),a=a.replace(/<(\w*)( (.+?))?>/g,'<div tag-name="$1"$2>').replace(/<\/(.+?)>/g,"</div>");var c=i.createElement("div");c.innerHTML=a;var d=!1,f=!1;for(loops=0;!d;){f=!1,loops++,loops>10&&(console.error("Une boucle de création de component a été détéctée"),d=!0);for(var h=e(c),k=0;k<h.length;k++){var l=h[k],m="";if(l.getAttribute&&(m=l.getAttribute("tag-name")||""),j.components[m]){var n=g.attributes_parser(l.attributes,b);n._CHILDNODES_=l.childNodes;var o=j.components[m].create(n),p=o.firstChild;for(attribute in n)n.hasOwnProperty(attribute)&&null===p.getAttribute(attribute)&&"string"==typeof n[attribute]&&p.setAttribute(attribute,n[attribute]);p.removeAttribute("tag-name"),l.parentNode.insertBefore(o,l),l.parentNode.removeChild(l),f=!0;break}}f||(d=!0)}return c.childNodes};g.inner=function(a){var b=i.createElement("div");return b.setAttribute("tag-name","_inner_"),a.appendChild(b),a};var n=new g("btn");n.render=function(a,b){b.type="raised"===b.type?"raised":"flat";var d="";b.color&&(d=".btn--"+b.color);var e=a.add(new f("div.btn.btn--"+b.type+d));e.tabIndex=0,a.inner(e),b.click&&c(e,"CLICK",b.click,e),b["no-ripple"]||l(e).add(m('<ripple parent="${parent}"/>',{parent:e}))};var o=new g("ripple");o.render=function(a,b){var d=a.add(new f("div.ripple"));a.inner(d),b.parent&&c(b.parent,"CLICK",function(a,b){var c=b.ripple,d=b.parent,e=c.add(new l("div.ripple__circle.ripple__circle--animate")),f=l(d).offset();e.style.left=a.pageX-f.x+"px",e.style.top=a.pageY-f.y+"px"},{ripple:d,parent:b.parent})},d(function(){l(i.body).add(m('<btn color="purple">flat</btn><btn type="raised">raised</btn>'))}),h.Application=j}(window,document);